% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_survival_with_km.R
\name{plot_survival_with_km}
\alias{plot_survival_with_km}
\title{Plot Kaplan–Meier and posterior survival curves}
\usage{
plot_survival_with_km(
  time,
  status,
  time_grid,
  hazard_draws,
  ylim = c(0, 1),
  burn = 0,
  n_sample = 100,
  seed = 1,
  palette_option = "viridis",
  title = "(a)"
)
}
\arguments{
\item{time}{Integer vector of observed times (days) for each subject.  Times
should take values from 1 up to \code{max(time_grid)}.}

\item{status}{Integer vector of the same length as \code{time}, where
\code{1} denotes an observed event and \code{0} denotes right‑censoring.}

\item{time_grid}{Integer vector defining the discretised time points.  Its
length should match the number of columns in \code{hazard_draws}.}

\item{hazard_draws}{Numeric matrix of posterior hazard draws.  Each row is a
Monte Carlo sample and each column corresponds to a time point in
\code{time_grid}.}

\item{ylim}{Numeric vector of length two giving the y‑axis limits for survival
probabilities.  Defaults to \code{c(0, 1)}.}

\item{burn}{Integer; number of initial rows in \code{hazard_draws} to discard
as burn‑in (default \code{5000}).}

\item{n_sample}{Integer; number of posterior survival trajectories to display
in the plot (default \code{100}).}

\item{seed}{Integer seed used when sampling the posterior trajectories
(default \code{1}).}

\item{palette_option}{Character string specifying the viridis palette used by
\code{ggplot2::scale_color_viridis_d()} (default \code{"viridis"}).}

\item{title}{Character string giving the plot title (default \code{"(a)"}).}
}
\value{
A \code{ggplot2} object.  You can further customise or save the plot
using standard ggplot2 syntax.
}
\description{
This function produces a survival plot that overlays the classical Kaplan–Meier
estimate, the posterior mean survival curve computed from a matrix of hazard
draws, and a set of posterior survival trajectories.  It is designed for
discrete‑time Bayesian survival analysis where hazards are sampled at each
integer time point.
}
\examples{
# Simulate a small data set and hazard draws for illustration
set.seed(2023)
times  <- c(3, 7, 7, 10, 12)
status <- c(1, 0, 1, 0, 1)
grid   <- seq_len(max(times))
# Fake posterior hazard draws: 200 samples by length(grid) columns
haz_draws <- matrix(runif(200 * length(grid), 0, 0.2), nrow = 200)
p <- plot_survival_with_km(times, status, grid, haz_draws,
                           burn = 50, n_sample = 5)
print(p)
}
